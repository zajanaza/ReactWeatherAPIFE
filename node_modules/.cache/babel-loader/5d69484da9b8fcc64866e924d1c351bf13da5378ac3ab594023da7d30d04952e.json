{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[weatherData,setWeatherData]=useState([]);const[showRoom,setShowRoom]=useState({});const[showData,setShowData]=useState(false);const[time,setTime]=useState(\"\");const[selectedCity,setSelectedCity]=useState(\"\");useEffect(()=>{getData();//nastavení intervalu aktualizace dat na co 2 minuty\nconst interval=setInterval(()=>{getData();},600000);// 120000 ms = 2 minut\n//čištění intervalu po odstranění komponenty\nreturn()=>clearInterval(interval);},[]);useEffect(()=>{// Aktualizace showRoom při změně weatherData nebo selectedCity\nif(selectedCity!==\"\"&&weatherData.length>0){const cityData=weatherData.find(item=>item.location===selectedCity);if(cityData){setShowRoom(cityData);setShowData(true);}}},[weatherData,selectedCity]);const getCurrentTime=()=>{const now=new Date();return now.toLocaleTimeString();};const getData=()=>{axios.get(\"https://spring-weatherapi2-jz.azurewebsites.net/weather\").then(function(response){//console.log(response.data);\nsetWeatherData(response.data);setTime(getCurrentTime);}).catch(function(error){const alertMessage=\"API nedostupn\\xE9: \".concat(error);alert(alertMessage);console.error(\"There was an error!\",error);});};const handleChange=e=>{let city=e.target.value;if(city!==\"label\"){setShowRoom(weatherData.find(item=>item.location===city));setShowData(true);setSelectedCity(city);}else{setShowData(false);setSelectedCity(\"\");}};const imageUrl=\"https:\"+showRoom.weather_icon;return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row my-5 text-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"display-3\",children:\"WeatherApp\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row my-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mx-auto\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"label\",children:\"choose the city\"}),weatherData.map((item,index)=>/*#__PURE__*/_jsx(\"option\",{value:item.location,children:item.location},index))]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row my-2\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"col-md-6 mx-auto\",children:[\"Updated: \",time]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row my-2\",children:/*#__PURE__*/_jsx(\"div\",{className:showData?\"col-md-6 mx-auto\":\"col-md-6 mx-auto d-none\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column align-items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"display-6 mb-4 fw-semibold\",children:showRoom.location}),/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"\",width:\"80\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Weather description: \",showRoom.weather_description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Time: \",showRoom.timestamp]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Temperature: \",showRoom.temp_celsius,\"\\xB0C\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Feels like temperature: \",showRoom.feelslike_c,\"\\xB0C\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Rel. humidity: \",showRoom.rel_humidity,\" %\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Wind speed: \",showRoom.windSpeed_mps,\" mps\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Wind direction: \",showRoom.wind_direction]})]})})})]});}export default App;","map":{"version":3,"names":["useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","App","weatherData","setWeatherData","showRoom","setShowRoom","showData","setShowData","time","setTime","selectedCity","setSelectedCity","getData","interval","setInterval","clearInterval","length","cityData","find","item","location","getCurrentTime","now","Date","toLocaleTimeString","get","then","response","data","catch","error","alertMessage","concat","alert","console","handleChange","e","city","target","value","imageUrl","weather_icon","className","children","onChange","map","index","src","alt","width","weather_description","timestamp","temp_celsius","feelslike_c","rel_humidity","windSpeed_mps","wind_direction"],"sources":["C:/Users/Jana/moje/programovani/výuka/Java/weather-app-main/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\n\nfunction App() {\n  const [weatherData, setWeatherData] = useState([]);\n  const [showRoom, setShowRoom] = useState({});\n  const [showData, setShowData] = useState(false);\n  const [time, setTime] = useState(\"\");\n  const [selectedCity, setSelectedCity] = useState(\"\");\n\n  useEffect(() => {\n    getData();\n    //nastavení intervalu aktualizace dat na co 2 minuty\n    const interval = setInterval(() => {\n      getData();\n    }, 600000); // 120000 ms = 2 minut\n    //čištění intervalu po odstranění komponenty\n    return () => clearInterval(interval);\n  }, []);\n\n  useEffect(() => {\n    // Aktualizace showRoom při změně weatherData nebo selectedCity\n    if (selectedCity !== \"\" && weatherData.length > 0) {\n      const cityData = weatherData.find(\n        (item) => item.location === selectedCity\n      );\n      if (cityData) {\n        setShowRoom(cityData);\n        setShowData(true);\n      }\n    }\n  }, [weatherData, selectedCity]);\n\n  const getCurrentTime = () => {\n    const now = new Date();\n    return now.toLocaleTimeString();\n  };\n\n  const getData = () => {\n    axios\n      .get(\"https://spring-weatherapi2-jz.azurewebsites.net/weather\")\n      .then(function (response) {\n        //console.log(response.data);\n        setWeatherData(response.data);\n        setTime(getCurrentTime);\n      })\n      .catch(function (error) {\n        const alertMessage = `API nedostupné: ${error}`;\n        alert(alertMessage);\n        console.error(\"There was an error!\", error);\n      });\n  };\n\n  const handleChange = (e) => {\n    let city = e.target.value;\n    if (city !== \"label\") {\n      setShowRoom(weatherData.find((item) => item.location === city));\n      setShowData(true);\n      setSelectedCity(city);\n    } else {\n      setShowData(false);\n      setSelectedCity(\"\");\n    }\n  }; \n  const imageUrl = \"https:\" + showRoom.weather_icon; \n\n  return (\n    <div className=\"container\">\n        <div className=\"row my-5 text-center\">\n          <h1 className=\"display-3\">WeatherApp</h1>\n        </div>\n        <div className=\"row my-5\">\n          <div className=\"col-md-6 mx-auto\">\n            <select className=\"form-select\" onChange={handleChange}>\n              <option value=\"label\">choose the city</option>\n              {weatherData.map((item, index) => (\n                <option key={index} value={item.location}>\n                  {item.location}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n        <div className=\"row my-2\">\n          <p className=\"col-md-6 mx-auto\">Updated: {time}</p>\n        </div>\n        <div className=\"row my-2\">\n          <div\n            className={showData ? \"col-md-6 mx-auto\" : \"col-md-6 mx-auto d-none\"}\n          >\n            <div className=\"d-flex flex-column align-items-center\">\n              <h2 className=\"display-6 mb-4 fw-semibold\">{showRoom.location}</h2>\n              <img src={imageUrl} alt=\"\" width=\"80\" />\n              <p>Weather description: {showRoom.weather_description}</p>\n              <p>Time: {showRoom.timestamp}</p>\n              <p>Temperature: {showRoom.temp_celsius}°C</p>\n              <p>Feels like temperature: {showRoom.feelslike_c}°C</p>\n              <p>Rel. humidity: {showRoom.rel_humidity} %</p>\n              <p>Wind speed: {showRoom.windSpeed_mps} mps</p>\n              <p>Wind direction: {showRoom.wind_direction}</p>\n                        \n            </div>\n          </div>\n        </div>\n      </div>\n    \n          \n    \n    \n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}